pipeline{
	agent any

	stages{
		stage ('Compile Stage'){

			steps {
				withMaven(maven : 'Maven'){
					bat 'mvn clean compile'
				}
			}
		}
		stage ('Testing Stage'){

			steps {
				withMaven(maven : 'Maven'){
					bat 'mvn test'
				}
			}
		}
		stage ('Build Stage'){

			steps {
				withMaven(maven : 'Maven'){
					bat 'mvn install'
				}
			}
		}
		stage ('SonarQube Analysis'){
			steps{
				dir("project_templates/java_project_template"){
				withSonarQubeEnv('SonarQube5.3') {
				sh 'mvn org.sonarsource.scanner.maven:sonar-maven-plugin:3.2:sonar'
									}
								}
							}
					}
		
}
}
